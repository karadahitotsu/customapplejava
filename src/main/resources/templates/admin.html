<!DOCTYPE HTML>
<html xlmns:th="http://www.thymeleaf.org">
<head>
    <title>Админ-панель</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

</head>
<body>
<h1>Добавить новый продукт</h1>

    <label for="name">Наименование:</label>
    <input type="text" id="name" name="name"><br><br>
    <label for="description">Описание:</label>
    <input type="text" id="description" name="description"><br><br>

    <label for="price">Цена:</label>
    <input type="text" id="price" name="price"><br><br>

    <label for="image">Файл изображения:</label>
    <input type="file" id="image" name="image"><br><br>

    <label for="imagePreview">Файл превью изображения:</label>
    <input type="file" id="imagePreview" name="imagePreview"><br><br>

    <label for="model">Модель:</label>
    <select id="model" name="model">
        <option value="airpods1">AirPods 1</option>
        <option value="airpods2">AirPods 2</option>
        <option value="airpods3">AirPods 3</option>
        <option value="airpodspro1">AirPods Pro 1</option>
        <option value="airpodspro2">AirPods Pro 2</option>
    </select><br><br>
    <label for="category">Категория:</label>
    <select id="category" name="category">
        <option value="none">none</option>
        <option value="universal">universal</option>
        <option value="designer">designer</option>
    </select><br><br>

    <input id="send-button" type="submit" value="Добавить продукт">


<script>
const sendButton = document.getElementById("send-button")
sendButton.addEventListener("click",async ()=>{
    const formData = new FormData();
    const file = document.getElementById("image");
    formData.append("file",file.files[0]);
    const preview = document.getElementById("imagePreview");
    formData.append("previewFile",preview.files[0]);
    const name = document.getElementById("name");
    formData.append("name",name.value);
    const description = document.getElementById("description");
    formData.append("description",description.value);
    const category = document.getElementById("category");
    formData.append("category",category.value);
    const price = document.getElementById("price");
    formData.append("price",price.value);
    const model = document.getElementById("model");
    formData.append("model",model.value);
    const response = await fetch("/api/image/catalog", {
        method: "POST",
        body: formData,
    });
    if (response.ok) {
        console.log(formData.model);
        //location.href = "/profile?userid="+userId;
        // ...
    } else {
        // Обработайте ошибку загрузки
        // ...
    }

});
</script>
</body>
</html>